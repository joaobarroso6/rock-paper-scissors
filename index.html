<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rock-Paper-Scissors Game</title>
  <style>
    /* Import Google Font */
    @import url('https://fonts.googleapis.com/css?family=Acme&display=swap');

    /* Reset Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* The switch - the box around the slider */
    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }

    /* Hide default HTML checkbox */
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* The slider */
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .4s;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px; width: 26px;
      left: 4px; bottom: 4px;
      background-color: white;
      transition: .4s;
    }

    input:checked + .slider {
      background-color: black;
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    /* Rounded sliders */
    .slider.round {
      border-radius: 34px;
    }

    .slider.round:before {
      border-radius: 50%;
    }

    /* Keyframes for Animations */
    @keyframes changeOrder {
      from { z-index: 9; }
      to { z-index: 1; }
    }

    @keyframes handShake {
      0%, 100% { transform: rotate(10deg); }
      50% { transform: rotate(-10deg); }
    }

    @keyframes handShake2 {
      0%, 100% { transform: rotateY(180deg) rotate(10deg); }
      50% { transform: rotateY(180deg) rotate(-10deg); }
    }

    /* Global Styles */
    body {
      font-family: 'Acme', Arial, sans-serif;
      background-color: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    form {
      width: 100%;
      max-width: 800px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      text-align: center;
      margin: 20px 0;
    }

    .section-center {
      text-align: center;
      margin-bottom: 20px;
    }

    .cenas-em-colunas {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .cenas-em-colunas p {
      margin: 0 10px;
    }

    /* Instructions */
    #instructions {
      text-align: center;
      margin-bottom: 20px;
    }

    /* Scoreboard */
    #scoreboard {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }

    #scoreboard > div {
      margin: 0 20px;
      text-align: center;
    }

    #scoreboard h3 {
      margin-bottom: 10px;
    }

    #scoreboard p {
      font-size: 2em;
    }

    /* Hands Container */
    #hands {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Hand Styles */
    .hand {
      margin: 20px;
      width: 200px;
      height: 200px;
      position: relative;
    }

    /* Hand Animation */
    .hand.normal {
      animation: handShake 2s infinite;
    }

    .hand.invert {
      transform: rotateY(180deg);
      animation: handShake2 2s infinite;
    }

    /* Hand Parts */
    .hand > div {
      position: absolute;
      box-sizing: border-box;
      border: 2px solid black;
      background: #eebb99;
      transition: all 0.1s;
    }

    .fist {
      height: 110px;
      left: 40px;
      top: 50px;
      width: 90px;
      border-radius: 20px 0 0 20px;
    }

    .finger {
      width: 70px;
      height: 30px;
      border-radius: 20px;
      left: 80px;
      transform-origin: 0 50%;
    }

    .finger-1 { top: 50px; --dif: 0px; }
    .finger-2 { top: 78px; left: 84px; --dif: 4px; }
    .finger-3 { top: 106px; --dif: 0px; }
    .finger-4 { top: 134px; height: 26px; left: 76px; --dif: -8px; }

    .thumb {
      width: 35px;
      height: 70px;
      border-radius: 0 20px 20px 20px;
      top: 50px;
      left: 80px;
      border-left: 0 solid;
      box-shadow: -17px 6px 0 -15px black;
    }

    .arm {
      width: 22px;
      height: 70px;
      left: 20px;
      top: 70px;
      border: 0;
      border-top: 2px solid black;
      border-bottom: 2px solid black;
    }

    /* Hand Positions for Scissors */
    .scissors .finger-1 {
      width: 130px;
      transform: rotate(-5deg);
    }

    .scissors .finger-2 {
      width: 130px;
      transform: rotate(5deg);
    }

    /* Hand Positions for Paper */
    .paper .finger-1,
    .paper .finger-2,
    .paper .finger-3,
    .paper .finger-4 {
      left: 124px;
      left: calc(124px + var(--dif));
      width: 80px;
      border-left: 0;
      border-radius: 0 20px 20px 0;
    }

    /* Result Message */
    #message {
      text-align: center;
      margin-top: 20px;
      display: none;
    }

    #message h2 {
      font-size: 2em;
    }

    /* Icons */
    .icons {
      width: 30px;
      height: 200px;
      display: inline-flex;
      flex-direction: column;
      margin: 20px;
    }

    .icons > div {
      flex: 1;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;
      overflow: hidden;
      position: relative;
    }

    label {
      animation: changeOrder 0.45s infinite linear;
      background: #f5f5f5;
      box-sizing: border-box;
      cursor: pointer;
      display: block;
      height: 60px;
      width: 60px;
      line-height: 60px;
      font-size: 2rem;
      position: absolute;
      top: 0;
      left: 0;
      user-select: none;
      text-align: center;
    }

    label:nth-of-type(1) { animation-delay: -0.00s; }
    label:nth-of-type(2) { animation-delay: -0.15s; }
    label:nth-of-type(3) { animation-delay: -0.30s; }

    label:active {
      position: static; 
      margin-left: 60px;
    }

    label:active::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 60px;
      z-index: 10;
      height: 60px;
    }

    /* Adjustments When User Makes a Choice */
    .hand.stopped {
      animation: none !important;
    }

    /* Result Messages */
    #message h2::before {
      content: attr(data-result);
    }

    /* Align player2-icons to the right */
    #player2-icons {
      margin-left: 70%;
    }

  </style>
</head>
<body>
  <form>
    <div class="section-center">
      <h1>Rock-Paper-Scissors</h1>
      <p id="instructions">
        Player 1: Press Q for Rock, A for Paper, Z for Scissors.<br>
        Player 2: Press M for Rock, K for Paper, I for Scissors.<br>
        The game will automatically restarts after 3 secounds.<br>
        The winner should make fun of the loser :)<br> 
      </p>
        <!-- Rounded switch -->
      <div class="cenas-em-colunas">
        <p>Play with the computer</p>
        <label class="switch">
          <input type="checkbox" id="mode-switch">
          <span class="slider round"></span>
        </label>
        <p>Play with your buddy</p>
      </div>
    </div>

    <!-- Scoreboard -->
    <div id="scoreboard">
        
      <div id="player1-score">
        <h3>Player</h3>
        <p id="player1-score-value">0</p>
      </div>
      <div id="player2-score">
        <h3>Computer</h3>
        <p id="player2-score-value">0</p>
      </div>
    </div>
    
    
    <div id="hands">
      <!-- User Hand -->
      <div class="hand normal" id="user-hand">
        <div class="fist"></div>
        <div class="finger finger-1"></div>
        <div class="finger finger-2"></div>
        <div class="finger finger-3"></div>
        <div class="finger finger-4"></div>
        <div class="thumb"></div>
        <div class="arm"></div>
      </div>
      <!-- Computer/Player 2 Hand -->
      <div class="hand invert" id="computer-hand">
        <div class="fist"></div>
        <div class="finger finger-1"></div>
        <div class="finger finger-2"></div>
        <div class="finger finger-3"></div>
        <div class="finger finger-4"></div>
        <div class="thumb"></div>
        <div class="arm"></div>
      </div>
    </div>

    <!-- Icons for Selection -->
    <div id="icons-container" style="width: 100%; display: flex; justify-content: space-between;">
      <div id="player1-icons" class="icons">
        <div>
          <label data-choice="rock">‚úä</label>
        </div>
        <div>
          <label data-choice="paper">üñêÔ∏è</label>
        </div>
        <div>
          <label data-choice="scissors">‚úåÔ∏è</label>
        </div>
      </div>
      <div id="player2-icons" class="icons" style="display: none;">
        <div>
          <label data-choice="rock">‚úä</label>
        </div>
        <div>
          <label data-choice="paper">üñêÔ∏è</label>
        </div>
        <div>
          <label data-choice="scissors">‚úåÔ∏è</label>
        </div>
      </div>
    </div>

    <!-- Hidden Inputs to Store Choices -->
    <input type="hidden" id="computer-choice" name="computer-choice">
    <input type="hidden" id="user-choice" name="user-choice">

    <!-- Result Message -->
    <div id="message">
      <h2 data-result=""></h2>
      <!-- Removed the "Play Again" button since the game resets automatically -->
    </div>
  </form>

  <script>
    // JavaScript to Handle Game Logic
    document.addEventListener('DOMContentLoaded', function() {
      var player1Labels = document.querySelectorAll('#player1-icons label');
      var player2Labels = document.querySelectorAll('#player2-icons label');
      var userHand = document.getElementById('user-hand');
      var computerHand = document.getElementById('computer-hand');
      var resultMessage = document.querySelector('#message h2');
      var userChoiceInput = document.getElementById('user-choice');
      var computerChoiceInput = document.getElementById('computer-choice');
      var modeSwitch = document.getElementById('mode-switch');
      var isTwoPlayer = modeSwitch.checked;

      var player1Score = 0;
      var player2Score = 0;

      var player1ScoreValue = document.getElementById('player1-score-value');
      var player2ScoreValue = document.getElementById('player2-score-value');

      var player1ScoreLabel = document.querySelector('#player1-score h3');
      var player2ScoreLabel = document.querySelector('#player2-score h3');

      var autoResetTimeout; // Variable to store the timeout

      var player1Choice = null;
      var player2Choice = null;

      modeSwitch.addEventListener('change', function() {
        isTwoPlayer = modeSwitch.checked;
        resetGame();
        resetScores();
        updateScoreLabels();
      });

      // Update the score labels based on the game mode
      function updateScoreLabels() {
        if (isTwoPlayer) {
          player1ScoreLabel.textContent = 'Player 1';
          player2ScoreLabel.textContent = 'Player 2';
          document.getElementById('player2-icons').style.display = 'flex';
        } else {
          player1ScoreLabel.textContent = 'Player';
          player2ScoreLabel.textContent = 'Computer';
          document.getElementById('player2-icons').style.display = 'none';
        }
      }

      // Reset scores
      function resetScores() {
        player1Score = 0;
        player2Score = 0;
        player1ScoreValue.textContent = player1Score;
        player2ScoreValue.textContent = player2Score;
      }

      // Player 1 Selection
      player1Labels.forEach(function(label) {
        label.addEventListener('click', function() {
          var userChoice = this.getAttribute('data-choice');
          handlePlayer1Choice(userChoice);
        });
      });

      // Player 2 Selection
      player2Labels.forEach(function(label) {
        label.addEventListener('click', function() {
          var player2Choice = this.getAttribute('data-choice');
          handlePlayer2Choice(player2Choice);
        });
      });

      // Keyboard Controls
      document.addEventListener('keydown', function(event) {
        var key = event.key.toLowerCase();
        if (!isTwoPlayer) {
          if (['q', 'a', 'z'].includes(key)) {
            var userChoice = keyToChoice(key);
            handlePlayer1Choice(userChoice);
          }
        } else {
          if (['q', 'a', 'z'].includes(key)) {
            var userChoice = keyToChoice(key);
            handlePlayer1Choice(userChoice);
          }
          if (['m', 'k', 'i'].includes(key)) {
            var player2Choice = keyToChoice(key);
            handlePlayer2Choice(player2Choice);
          }
        }
      });

      function keyToChoice(key) {
        var mapping = {
          'q': 'rock',
          'a': 'paper',
          'z': 'scissors',
          'm': 'rock',
          'k': 'paper',
          'i': 'scissors'
        };
        return mapping[key];
      }

      function handlePlayer1Choice(userChoice) {
        userChoiceInput.value = userChoice;
        if (!isTwoPlayer) {
          // Single-player mode
          var choices = ['rock', 'paper', 'scissors'];
          var computerChoice = choices[Math.floor(Math.random() * choices.length)];
          computerChoiceInput.value = computerChoice;

          // Update Hands
          updateHand(userHand, userChoice);
          updateHand(computerHand, computerChoice);

          // Determine Winner
          var result = determineWinner(userChoice, computerChoice);
          resultMessage.setAttribute('data-result', result);

          // Show Message
          document.getElementById('message').style.display = 'block';

          // Stop Animations
          userHand.classList.add('stopped');
          computerHand.classList.add('stopped');

          // Update Scores
          if (result === "You win!") {
            player1Score++;
          } else if (result === "Computer wins!") {
            player2Score++;
          }

          player1ScoreValue.textContent = player1Score;
          player2ScoreValue.textContent = player2Score;

          // Automatically reset the game after 3 seconds
          autoResetTimeout = setTimeout(resetGame, 3000);
        } else {
          // Two-player mode
          player1Choice = userChoice;

          // Update User Hand
          updateHand(userHand, player1Choice);

          // Check if both choices are made
          if (player2Choice !== null) {
            determineAndShowResult();
          }
        }
      }

      function handlePlayer2Choice(choice) {
        if (isTwoPlayer) {
          player2Choice = choice;

          // Update Computer Hand
          updateHand(computerHand, player2Choice);

          // Check if both choices are made
          if (player1Choice !== null) {
            determineAndShowResult();
          }
        }
      }

      function determineAndShowResult() {
        var result = determineWinner(player1Choice, player2Choice);
        resultMessage.setAttribute('data-result', result);

        // Show Message
        document.getElementById('message').style.display = 'block';

        // Stop Animations
        userHand.classList.add('stopped');
        computerHand.classList.add('stopped');

        // Update Scores
        if (result === "Player 1 wins!") {
          player1Score++;
        } else if (result === "Player 2 wins!") {
          player2Score++;
        }

        player1ScoreValue.textContent = player1Score;
        player2ScoreValue.textContent = player2Score;

        // Automatically reset the game after 3 seconds
        autoResetTimeout = setTimeout(resetGame, 3000);

        // Reset choices for next round
        player1Choice = null;
        player2Choice = null;
      }

      function updateHand(handElement, choice) {
        // Remove previous classes
        handElement.classList.remove('rock', 'paper', 'scissors');
        // Add new class
        handElement.classList.add(choice);

        // Reset finger styles
        var fingers = handElement.querySelectorAll('.finger');
        fingers.forEach(function(finger) {
          finger.style.width = '';
          finger.style.left = '';
          finger.style.borderLeft = '';
          finger.style.borderRadius = '';
          finger.style.transform = '';
        });

        if (choice === 'paper') {
          fingers.forEach(function(finger) {
            finger.style.left = '124px';
            finger.style.left = 'calc(124px + var(--dif))';
            finger.style.width = '80px';
            finger.style.borderLeft = '0';
            finger.style.borderRadius = '0 20px 20px 0';
          });
        } else if (choice === 'scissors') {
          var finger1 = handElement.querySelector('.finger-1');
          var finger2 = handElement.querySelector('.finger-2');
          finger1.style.width = '130px';
          finger1.style.transform = 'rotate(-5deg)';
          finger2.style.width = '130px';
          finger2.style.transform = 'rotate(5deg)';
        }
        // For rock, no changes needed
      }

      function determineWinner(user, computer) {
        if (user === computer) {
          return "It's a tie!";
        } else if (
          (user === 'rock' && computer === 'scissors') ||
          (user === 'paper' && computer === 'rock') ||
          (user === 'scissors' && computer === 'paper')
        ) {
          return isTwoPlayer ? "Player 1 wins!" : "You win!";
        } else {
          return isTwoPlayer ? "Player 2 wins!" : "Computer wins!";
        }
      }

      window.resetGame = function() {
        // Clear any existing timeouts
        clearTimeout(autoResetTimeout);

        // Reset Hands
        userHand.classList.remove('rock', 'paper', 'scissors', 'stopped');
        computerHand.classList.remove('rock', 'paper', 'scissors', 'stopped');
        // Hide Message
        document.getElementById('message').style.display = 'none';
        // Restart Animations
        userHand.style.animation = 'handShake 2s infinite';
        computerHand.style.animation = 'handShake2 2s infinite';

        // Reset choices
        player1Choice = null;
        player2Choice = null;

        // Update icons display
        if (isTwoPlayer) {
          document.getElementById('player1-icons').style.display = 'flex';
          document.getElementById('player2-icons').style.display = 'flex';
        } else {
          document.getElementById('player1-icons').style.display = 'flex';
          document.getElementById('player2-icons').style.display = 'none';
        }

        // Update score labels
        updateScoreLabels();
      }

      // Initialize score labels on page load
      updateScoreLabels();
    });
  </script>
</body>
</html>
